---
title: "javascriptã§å’Œé›†åˆã€ç©é›†åˆã€å·®é›†åˆã€æ’ä»–çš„è«–ç†å’Œã‚’å–å¾—ã™ã‚‹éš›ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆ"
emoji: "ğŸ¦”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["javascript","é›†åˆ"]
published: true
---

## ã¯ã˜ã‚ã«

javascriptã§å’Œé›†åˆã€ç©é›†åˆã€å·®é›†åˆã€æ’ä»–çš„è«–ç†å’Œã‚’å–å¾—ã™ã‚‹éš›ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§ã™ã€‚

## å’Œé›†åˆ(Union)

```ts
const A = [1, 2, 4, 5, 7];
const B = [2, 3, 5, 6, 8];
// -> [1, 2, 3, 4, 5, 6, 7, 8]

// setã‚’ä½¿ã†
[...new Set([...A, ...B])]

// reduceã‚’ä½¿ã†
[...A, ...B].reduce((cur, acc) => [...cur, ...(cur.includes(acc) ? [] : [acc])], [] as number[]

// lodashã®unionã‚’ä½¿ã†
_.union(A, B)
```

é…åˆ—ã®è¦ç´ ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ

```ts
const A = [
  { id: 1, x: 1 },
  { id: 2, x: 1 },
  { id: 4, x: 1 },
  { id: 5, x: 1 },
  { id: 7, x: 1 },
];
const B = [
  { id: 2, x: 1 },
  { id: 3, x: 1 },
  { id: 5, x: 1 },
  { id: 6, x: 1 },
  { id: 8, x: 1 },
];
// -> idãŒåŒã˜ã‚‚ã®ã¯åŒå€¤ã¨ã™ã‚‹
// [{ id: 1, x: 1 },
//  { id: 2, x: 1 },
//  { id: 3, x: 1 },
//  { id: 4, x: 1 },
//  { id: 5, x: 1 },
//  { id: 6, x: 1 },
//  { id: 7, x: 1 },
//  { id: 8, x: 1 }];

// reduceä½¿ã†
[...A, ...B].reduce((acc, cur) => [...acc, ...(acc.some((item) => item.id === cur.id) ? [] : [cur])],[] as { id: number; x: number }[])

// lodashã®unionByã‚’ä½¿ã†
_.unionBy(A, B, 'id')

// lodashã®unionWithã‚’ä½¿ã†
_.unionWith(A, B, (a, b) => a.id === b.id)
```

## ç©é›†åˆ(Intersection)

```ts
const A = [1, 2, 4, 5, 7];
const B = [2, 3, 5, 6, 8];
// -> [2, 5]

// filterã‚’ä½¿ã†
A.filter((valA) => B.includes(valA))

// lodashã®intersectionã‚’ä½¿ã†
_.intersection(A, B)
```

é…åˆ—ã®è¦ç´ ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ

```ts
const A = [
  { id: 1, x: 1 },
  { id: 2, x: 1 },
  { id: 4, x: 1 },
  { id: 5, x: 1 },
  { id: 7, x: 1 },
];
const B = [
  { id: 2, x: 1 },
  { id: 3, x: 1 },
  { id: 5, x: 1 },
  { id: 6, x: 1 },
  { id: 8, x: 1 },
];
// -> idãŒåŒã˜ã‚‚ã®ã¯åŒå€¤ã¨ã™ã‚‹
// [{ id: 2, x: 1 },
// { id: 5, x: 1 },];

// filterã‚’ä½¿ã†
A.filter((valA) => B.some((valB) => valB.id === valA.id))

// lodashã®intersectionByã‚’ä½¿ã†
_.intersectionBy(A, B, 'id')

// lodashã®intersectionWithã‚’ä½¿ã†
_.intersectionWith(A, B, (a, b) => a.id === b.id)
```

## å·®é›†åˆ(difference)

```ts
const A = [1, 2, 4, 5, 7];
const B = [2, 3, 5, 6, 8];
// -> A - Bã¯[1, 4, 7]

// filterã‚’ä½¿ã†
A.filter((val) => !B.includes(val))

// reduceã‚’ä½¿ã†
 A.reduce((acc, cur) => [...acc, ...(B.includes(cur) ? [] : [cur])], [] as number[])

// lodashã®differenceã‚’ä½¿ã†
_.difference(A, B)
```

é…åˆ—ã®è¦ç´ ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ

```ts
const A = [
  { id: 1, x: 1 },
  { id: 2, x: 1 },
  { id: 4, x: 1 },
  { id: 5, x: 1 },
  { id: 7, x: 1 },
];
const B = [
  { id: 2, x: 1 },
  { id: 3, x: 1 },
  { id: 5, x: 1 },
  { id: 6, x: 1 },
  { id: 8, x: 1 },
];
// -> idãŒåŒã˜ã‚‚ã®ã¯åŒå€¤ã¨ã™ã‚‹
// [{ id: 1, x: 1 },
// { id: 4, x: 1 },
// { id: 7, x: 1 }]

// filterã‚’ä½¿ã†
A.filter((valA) => !B.some((valB) => valA.id === valB.id))

// lodashã®differenceByã‚’ä½¿ã†
_.differenceBy(A, B, 'id')

// lodashã®differenceWithã‚’ä½¿ã†
_.differenceWith(A, B, (a, b) => a.id === b.id)
```

## æ’ä»–çš„è«–ç†å’Œ(xor)

```ts
const A = [1, 2, 4, 5, 7];
const B = [2, 3, 5, 6, 8];
// -> [1, 3, 4, 6, 7, 8];

// filterã‚’ä½¿ã†
[...A, ...B].filter((val, _, arr) => arr.filter((v) => v === val).length === 1)

// reduceã‚’ä½¿ã†
[...A, ...B].reduce((acc, cur, _, arr) => [...acc, ...(arr.filter((val) => val === cur).length === 1 ? [cur] : [])], [] as number[])

// lodashã®xorã‚’ä½¿ã†
_.xor(A, B)
```

é…åˆ—ã®è¦ç´ ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ

```ts
const A = [
  { id: 1, x: 1 },
  { id: 2, x: 1 },
  { id: 4, x: 1 },
  { id: 5, x: 1 },
  { id: 7, x: 1 },
];
const B = [
  { id: 2, x: 1 },
  { id: 3, x: 1 },
  { id: 5, x: 1 },
  { id: 6, x: 1 },
  { id: 8, x: 1 },
];
// -> idãŒåŒã˜ã‚‚ã®ã¯åŒå€¤ã¨ã™ã‚‹
// [{ id: 1, x: 1 },
//  { id: 3, x: 1 },
//  { id: 4, x: 1 },
//  { id: 6, x: 1 },
//  { id: 7, x: 1 },
//  { id: 8, x: 1 }]

// filterã‚’ä½¿ã†
[...A, ...B].filter((val, _, arr) => arr.filter((v) => v.id === val.id).length === 1)

// lodashã®xorByã‚’ä½¿ã†
_.xorBy(A, B, 'id')

// lodashã®xorWithã‚’ä½¿ã†
_.xorWith(A, B, (a, b) => a.id === b.id)
```

## å‚ç…§

https://qiita.com/waterada/items/6d92175c0cebecd410c6

Setã§ã®é›†åˆè«–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ç¾åœ¨stage2ã®ã‚ˆã†ã§ã™
https://github.com/tc39/proposal-set-methods