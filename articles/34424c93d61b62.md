---
title: "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"
emoji: "ğŸ‘Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TypeScript", "Node"]
published: true
---

# æ¦‚è¦

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹éš›ã€æ¯å›1ã‹ã‚‰è¨­å®šã—ã¦ã„ãŸã®ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚TypeScripã€ESLintã€Prettierã€Jestã®è¨­å®šå†…å®¹ã‚’æ›¸ã„ã¦ãŠãã¾ã™ã€‚

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯GitHubã«åæ˜ ã—ã¦ã„ã¾ã™ã€‚
https://github.com/nsuzuki7713/typescript-mono-repo/tree/main/packages/nodeTemplate

:::message alert
ã“ã®è¨˜äº‹ã¯2022å¹´8æœˆã«æ›¸ã„ã¦ã„ã¾ã™ã€‚è¨­å®šãŒå¤ããªã£ã¦ã„ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã®ã§ã€ã”æ³¨æ„ãã ã•ã„ã€‚
:::

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

## package.json

- jestã¯ `ts-jest` ã ã¨é…ã„ã®ã§ã€ `swc` ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
- eslint ã§ã¯ã€`jest` ã¨ `jsdoc` ã®ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

```json:package.json
{
  "scripts": {
    "build": "tsc",
    "lint": "eslint --ext .ts",
    "lint:fix": "eslint --fix  --ext .ts",
    "test": "jest"
  },
  "devDependencies": {
    "@swc/core": "^1.2.223",
    "@swc/jest": "^0.2.22",
    "@types/jest": "^28.1.6",
    "@types/node": "^18.6.4",
    "@typescript-eslint/eslint-plugin": "^5.32.0",
    "@typescript-eslint/parser": "^5.32.0",
    "eslint": "^8.21.0",
    "eslint-config-prettier": "^8.5.0",
    "eslint-plugin-jest": "^26.7.0",
    "eslint-plugin-jsdoc": "^39.3.4",
    "jest": "^28.1.3",
    "prettier": "^2.7.1",
    "ts-jest": "^28.0.7",
    "ts-node": "^10.9.1",
    "typescript": "^4.7.4"
  }
}
```

## .eslintrc.json

ESLintã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

- eslintã¯ `eslint:recommended` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
- ãƒ†ã‚¹ãƒˆæ›¸ãéš›ã®ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦ã€ `plugin:jest/recommended` ã¨ `plugin:jest/style` ã‚’è¿½åŠ 
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ«ãƒ¼ãƒ«ã¨ã—ã¦ã€ `plugin:jsdoc/recommended` ã‚’è¿½åŠ 
- `prettier` ã®è¨­å®šã‚‚è¿½åŠ 

```json:.eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:jest/recommended",
    "plugin:jest/style",
    "plugin:jsdoc/recommended",
    "prettier"
  ],
  "plugins": ["@typescript-eslint", "jest", "jsdoc"],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "sourceType": "module"
  },
  "env": { "node": true, "es6": true },
  "rules": {
    "jsdoc/require-jsdoc": [
      "error",
      {
        // ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã‚‚ã ã‘ã‚’æœ‰åŠ¹ã«ã™ã‚‹
        "publicOnly": true,
        "require": {
          "ArrowFunctionExpression": true,
          "ClassDeclaration": true,
          "MethodDefinition": true
        },
        // Constructor ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ªãƒ•ã«ã™ã‚‹
        "checkConstructors": false
      }
    ],
    // TypeScript ãªã®ã§å¼•æ•°ã®å‹ã®èª¬æ˜ã¯ã‚ªãƒ•ã«ã™ã‚‹
    "jsdoc/require-param-type": "off",
    // TypeScript ãªã®ã§è¿”ã‚Šå€¤ã®å‹ã®èª¬æ˜ã‚ªãƒ•ã«ã™ã‚‹
    "jsdoc/require-returns-type": "off"
  }
}
```

## .prettierrc.js

prettierã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```js:.prettierrc.js
// https://prettier.io/docs/en/options.html
module.exports = {
  tabWidth: 2, //ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®ã‚¹ãƒšãƒ¼ã‚¹æ•°
  singleQuote: true, //ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã«çµ±ä¸€
  trailingComma: "es5", //æœ«å°¾ã®ã‚«ãƒ³ãƒã‚’ã©ã†ã™ã‚‹ã‹: es5ã«æº–æ‹ ã•ã›ã‚‹ã€‚
  printWidth: 120,
};
```

## jest.config.js

jestã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

ts-jestã¯å®Ÿè¡Œé€Ÿåº¦ãŒé…ã„ã®ã§ã€ transform ã§ `'@swc/jest'` ã‚’æŒ‡å®šã™ã‚‹ã€‚

```js:jest.config.js
/** @type {import('ts-jest/dist/types').InitialOptionsTsJest} */
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/tests/'],
  transform: {
    '^.+\\.tsx?$': ['@swc/jest'],
  },
};
```

## tsconfig.json

TypeScriptã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

```json:tsconfig.json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "commonjs",
    "strict": true,
    // ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–‡å­—åˆ—ã®å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹
    "forceConsistentCasingInFileNames": true,
    // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å‹ã‚„é…åˆ—ã§å®£è¨€ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒã¤ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å³å¯†ã«è©•ä¾¡ã™ã‚‹
    "noUncheckedIndexedAccess": true,
    // ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹æ™‚ã€overrideã‚’å¿…é ˆã«ã™ã‚‹
    "noImplicitOverride": true,
    // witchæ–‡ã§ã€caseã‚’breakã‚„returnã§çµ‚äº†ã™ã‚‹
    "noFallthroughCasesInSwitch": true,
    "skipLibCheck": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "sourceMap": true
  },
  "include": ["src/**/*"]
}
```

## settings.json

VSCodeã§è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã›ã‚‹ãŸã‚ã«è¨­å®šã™ã‚‹ã€‚

```json:.vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
}
```

# å‚ç…§

https://qiita.com/notakaos/items/85fd2f5c549f247585b1

https://this.aereal.org/entry/2020/07/29/235650

https://miyauchi.dev/ja/posts/speeding-up-jest/

https://zenn.dev/chida/articles/bdbcd59c90e2e1

https://qiita.com/ryokkkke/items/390647a7c26933940470